{"openapi":"3.1.0","info":{"title":"Scrittura Libro API","version":"0.1.0"},"paths":{"/api/config":{"get":{"summary":"Get Config Endpoint","description":"Restituisce la configurazione degli input.","operationId":"get_config_endpoint_api_config_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConfigResponse"}}}}}}},"/api/submissions":{"post":{"summary":"Submit Form","description":"Riceve e valida i dati del form.","operationId":"submit_form_api_submissions_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubmissionRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubmissionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/questions/generate":{"post":{"summary":"Generate Questions Endpoint","description":"Genera domande preliminari basate sul form compilato.","operationId":"generate_questions_endpoint_api_questions_generate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/QuestionGenerationRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QuestionsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/questions/answers":{"post":{"summary":"Submit Answers","description":"Riceve le risposte alle domande e continua il flusso.","operationId":"submit_answers_api_questions_answers_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnswersRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnswersResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/draft/generate":{"post":{"summary":"Generate Draft Endpoint","description":"Genera una bozza estesa della trama.","operationId":"generate_draft_endpoint_api_draft_generate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DraftGenerationRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DraftResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/draft/modify":{"post":{"summary":"Modify Draft Endpoint","description":"Rigenera la bozza con le modifiche richieste dall'utente.","operationId":"modify_draft_endpoint_api_draft_modify_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DraftModificationRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DraftResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/draft/validate":{"post":{"summary":"Validate Draft Endpoint","description":"Valida la bozza finale.","operationId":"validate_draft_endpoint_api_draft_validate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DraftValidationRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DraftValidationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/draft/{session_id}":{"get":{"summary":"Get Draft Endpoint","description":"Recupera la bozza corrente di una sessione.","operationId":"get_draft_endpoint_api_draft__session_id__get","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DraftResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/health":{"get":{"summary":"Health","description":"Endpoint di health check.","operationId":"health_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"AnswersRequest":{"properties":{"session_id":{"type":"string","title":"Session Id"},"answers":{"items":{"$ref":"#/components/schemas/QuestionAnswer"},"type":"array","title":"Answers"}},"type":"object","required":["session_id","answers"],"title":"AnswersRequest"},"AnswersResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"message":{"type":"string","title":"Message"},"session_id":{"type":"string","title":"Session Id"}},"type":"object","required":["success","message","session_id"],"title":"AnswersResponse"},"ConfigResponse":{"properties":{"llm_models":{"items":{"type":"string"},"type":"array","title":"Llm Models"},"fields":{"items":{"$ref":"#/components/schemas/FieldConfig"},"type":"array","title":"Fields"}},"type":"object","required":["llm_models","fields"],"title":"ConfigResponse"},"DraftGenerationRequest":{"properties":{"form_data":{"$ref":"#/components/schemas/SubmissionRequest"},"question_answers":{"items":{"$ref":"#/components/schemas/QuestionAnswer"},"type":"array","title":"Question Answers"},"session_id":{"type":"string","title":"Session Id"}},"type":"object","required":["form_data","question_answers","session_id"],"title":"DraftGenerationRequest"},"DraftModificationRequest":{"properties":{"session_id":{"type":"string","title":"Session Id"},"user_feedback":{"type":"string","title":"User Feedback"},"current_version":{"type":"integer","title":"Current Version"}},"type":"object","required":["session_id","user_feedback","current_version"],"title":"DraftModificationRequest"},"DraftResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"session_id":{"type":"string","title":"Session Id"},"draft_text":{"type":"string","title":"Draft Text"},"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title"},"version":{"type":"integer","title":"Version"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message"}},"type":"object","required":["success","session_id","draft_text","version"],"title":"DraftResponse"},"DraftValidationRequest":{"properties":{"session_id":{"type":"string","title":"Session Id"},"validated":{"type":"boolean","title":"Validated"}},"type":"object","required":["session_id","validated"],"title":"DraftValidationRequest"},"DraftValidationResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"session_id":{"type":"string","title":"Session Id"},"message":{"type":"string","title":"Message"}},"type":"object","required":["success","session_id","message"],"title":"DraftValidationResponse"},"FieldConfig":{"properties":{"id":{"type":"string","title":"Id"},"label":{"type":"string","title":"Label"},"type":{"type":"string","enum":["select","text"],"title":"Type"},"required":{"type":"boolean","title":"Required","default":false},"options":{"anyOf":[{"items":{"$ref":"#/components/schemas/FieldOption"},"type":"array"},{"type":"null"}],"title":"Options"},"placeholder":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Placeholder"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"}},"type":"object","required":["id","label","type"],"title":"FieldConfig"},"FieldOption":{"properties":{"value":{"type":"string","title":"Value"},"label":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Label"}},"type":"object","required":["value"],"title":"FieldOption"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"Question":{"properties":{"id":{"type":"string","title":"Id"},"text":{"type":"string","title":"Text"},"type":{"type":"string","enum":["text","multiple_choice"],"title":"Type"},"options":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Options"}},"type":"object","required":["id","text","type"],"title":"Question"},"QuestionAnswer":{"properties":{"question_id":{"type":"string","title":"Question Id"},"answer":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Answer"}},"type":"object","required":["question_id"],"title":"QuestionAnswer"},"QuestionGenerationRequest":{"properties":{"form_data":{"$ref":"#/components/schemas/SubmissionRequest"}},"type":"object","required":["form_data"],"title":"QuestionGenerationRequest"},"QuestionsResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"session_id":{"type":"string","title":"Session Id"},"questions":{"items":{"$ref":"#/components/schemas/Question"},"type":"array","title":"Questions"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message"}},"type":"object","required":["success","session_id","questions"],"title":"QuestionsResponse"},"SubmissionRequest":{"properties":{"llm_model":{"type":"string","title":"Llm Model"},"plot":{"type":"string","minLength":1,"title":"Plot","description":"Trama del romanzo (obbligatoria)"},"genre":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Genre"},"subgenre":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subgenre"},"theme":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Theme"},"protagonist":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Protagonist"},"character_arc":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Character Arc"},"point_of_view":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Point Of View"},"narrative_voice":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Narrative Voice"},"style":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Style"},"temporal_structure":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Temporal Structure"},"pace":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Pace"},"realism":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Realism"},"ambiguity":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ambiguity"},"intentionality":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Intentionality"},"author":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Author"},"user_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Name"}},"type":"object","required":["llm_model","plot"],"title":"SubmissionRequest"},"SubmissionResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"message":{"type":"string","title":"Message"},"data":{"anyOf":[{"$ref":"#/components/schemas/SubmissionRequest"},{"type":"null"}]}},"type":"object","required":["success","message"],"title":"SubmissionResponse"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}
